<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Python 编写的HLTV网站选手数据页面爬取脚本</title>
    <link href="/2024/07/23/hltv/"/>
    <url>/2024/07/23/hltv/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre><code class="hljs cpp">what can i sayhltv out</code></pre></div><h3 id="1-环境说明"><a href="#1-环境说明" class="headerlink" title="1.环境说明"></a>1.环境说明</h3><p>代码使用的环境为vscode+conda，python版本为3.11，环境配置参照其他博主写的安装教程安装即可。<br>本代码使用了 Undetected_chromedriver用于绕开hltv的clloudflare反爬， 可以直接在终端使用<code>conda install conda-forge::undetected-chromedriver</code>安装插件。<br>本代码使用了 openpyxl用于生成选手数据表格 ， 可以直接在终端使用<code>conda install anaconda::openpyxl</code>安装插件。</p><h3 id="2-代码介绍"><a href="#2-代码介绍" class="headerlink" title="2.代码介绍"></a>2.代码介绍</h3><p>首先是导入部分：</p><div class="code-wrapper"><pre><code class="hljs py"><span class="hljs-keyword">import</span> re <span class="hljs-keyword">import</span> os <span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> Workbook<span class="hljs-keyword">import</span> undetected_chromedriver <span class="hljs-keyword">as</span> uc<span class="hljs-keyword">import</span> time</code></pre></div><p>然后是一个可以更改的初始状态区，用于列出需要筛选的赛事</p><div class="code-wrapper"><pre><code class="hljs py">webfront=<span class="hljs-string">&quot;https://www.hltv.org/stats/players&quot;</span><span class="hljs-comment">#默认头，无需更改</span><span class="hljs-comment">#赛事筛选，在hltv筛选器中筛选后复制？之后的文字</span>eventfilter=<span class="hljs-string">&quot;?startDate=all&amp;event=7732&amp;event=7552&amp;event=7551&amp;event=7435&amp;event=7258&amp;event=7578&amp;event=7261&amp;event=7260&amp;event=7259&amp;event=7577&amp;event=7148&amp;event=7437&amp;event=7440&amp;event=7755&amp;event=7438&amp;event=7475&amp;event=7485&quot;</span>keyword = <span class="hljs-string">&quot;&gt;&quot;</span> <span class="hljs-comment">#用于清除rating和name之前的一些多余字符</span>supereliteevent = [<span class="hljs-string">&quot;&amp;event=7435&quot;</span>,<span class="hljs-string">&quot;&amp;event=7148&quot;</span>] <span class="hljs-comment">#手动添加超级精英赛事编号，按照格式</span>eliteevent = [<span class="hljs-string">&quot;&amp;event=7732&quot;</span>]  <span class="hljs-comment">#手动添加精英赛事编号，按照格式</span>bigevent = [<span class="hljs-string">&quot;&amp;event=7437&quot;</span>,<span class="hljs-string">&quot;&amp;event=7440&quot;</span>,<span class="hljs-string">&quot;&amp;event=7438&quot;</span>,<span class="hljs-string">&quot;&amp;event=7485&quot;</span>] <span class="hljs-comment">#手动添加大型赛事编号，按照格式</span>supereliteeventplayoff = [<span class="hljs-string">&quot;&amp;startDate=2024-02-09&amp;endDate=2024-02-12&quot;</span>,<span class="hljs-string">&quot;&amp;startDate=2024-03-28&amp;endDate=2024-04-02&quot;</span>] <span class="hljs-comment">#用于筛选淘汰赛</span>eliteeventplayoff = [<span class="hljs-string">&quot;&amp;startDate=2024-07-18&amp;endDate=2024-07-22&amp;bestOfX=BestOf3&quot;</span>] <span class="hljs-comment">#石油杯比较特殊，淘汰赛和小组赛在同一天，所以用bo3筛选</span>bigeventplayoff = [<span class="hljs-string">&quot;&amp;startDate=2024-04-11&amp;endDate=2024-04-14&quot;</span>,<span class="hljs-string">&quot;&amp;startDate=2024-05-09&amp;endDate=2024-05-13&quot;</span>,<span class="hljs-string">&quot;&amp;startDate=2024-05-31&amp;endDate=2024-06-03&quot;</span>,<span class="hljs-string">&quot;&amp;startDate=2024-06-15&amp;endDate=2024-06-17&quot;</span>] <span class="hljs-comment">#大型赛事淘汰赛</span><span class="hljs-comment">#用于填写表格的第一行</span>description = [<span class="hljs-string">&quot;选手ID&quot;</span>,<span class="hljs-string">&quot;图池数&quot;</span>,<span class="hljs-string">&quot;rating&quot;</span>,<span class="hljs-string">&quot;rounds&quot;</span>,<span class="hljs-string">&quot;CTrating&quot;</span>,<span class="hljs-string">&quot;Trating&quot;</span>,<span class="hljs-string">&quot;首杀尝试&quot;</span>,<span class="hljs-string">&quot;首杀成功&quot;</span>,<span class="hljs-string">&quot;首杀rating&quot;</span>,<span class="hljs-string">&quot;手枪局rating&quot;</span>,<span class="hljs-string">&quot;DPR&quot;</span>,<span class="hljs-string">&quot;KAST&quot;</span>,<span class="hljs-string">&quot;IMPACT&quot;</span>,<span class="hljs-string">&quot;ADR&quot;</span>,<span class="hljs-string">&quot;KPR&quot;</span>,<span class="hljs-string">&quot;map vs top5&quot;</span>,<span class="hljs-string">&quot;rating vs top5&quot;</span>,<span class="hljs-string">&quot;map vs top10&quot;</span>,<span class="hljs-string">&quot;rating vs top10&quot;</span>,<span class="hljs-string">&quot;首杀次数&quot;</span>,<span class="hljs-string">&quot;0kill&quot;</span>,<span class="hljs-string">&quot;1kill&quot;</span>,<span class="hljs-string">&quot;2kill&quot;</span>,<span class="hljs-string">&quot;3kill&quot;</span>,<span class="hljs-string">&quot;4kill&quot;</span>,<span class="hljs-string">&quot;5kill&quot;</span>,<span class="hljs-string">&quot;0.85+&quot;</span>,<span class="hljs-string">&quot;1.00+&quot;</span>,<span class="hljs-string">&quot;1.15+&quot;</span>,<span class="hljs-string">&quot;1.30+&quot;</span>,<span class="hljs-string">&quot;1v1&quot;</span>,<span class="hljs-string">&quot;1v2&quot;</span>,<span class="hljs-string">&quot;1v3&quot;</span>,<span class="hljs-string">&quot;1v4&quot;</span>,<span class="hljs-string">&quot;1v5&quot;</span>,<span class="hljs-string">&quot;big event map&quot;</span>,<span class="hljs-string">&quot;big event rating&quot;</span>,<span class="hljs-string">&quot;elite event map&quot;</span>,<span class="hljs-string">&quot;elite event rating&quot;</span>,<span class="hljs-string">&quot;superelite event map&quot;</span>,<span class="hljs-string">&quot;supereliteevent rating&quot;</span>,<span class="hljs-string">&quot;big event playoff map&quot;</span>,<span class="hljs-string">&quot;big event playoff rating&quot;</span>,<span class="hljs-string">&quot;elite event playoff map&quot;</span>,<span class="hljs-string">&quot;elite event playoff rating&quot;</span>,<span class="hljs-string">&quot;superelite event playoff map&quot;</span>,<span class="hljs-string">&quot;superelite event playoff rating&quot;</span>,<span class="hljs-string">&quot;win map rating&quot;</span>]ws.append(description) <span class="hljs-comment">#上传表格的第一行</span>minMapCountfilter=<span class="hljs-string">&quot;&amp;minMapCount=45&quot;</span> <span class="hljs-comment"># 图池数筛选器，更改数字使用</span>minrating = <span class="hljs-number">1.09</span> <span class="hljs-comment">#大于此数的选手rating纳入统计</span>file_path = os.path.join(<span class="hljs-string">&quot;E:\\hltv&quot;</span>, <span class="hljs-string">&quot;rating.xlsx&quot;</span>) <span class="hljs-comment">#表格文件保存路径，根据需要更改</span></code></pre></div><p><img src="/2024/07/23/hltv/test.png" alt="图片引用方法二"></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
